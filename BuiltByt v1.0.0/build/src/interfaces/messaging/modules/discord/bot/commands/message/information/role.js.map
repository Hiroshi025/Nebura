{"version":3,"file":"role.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/information/role.ts"],"sourceRoot":"/","sourcesContent":["import {\r\n\tActionRowBuilder, ButtonBuilder, ButtonStyle, ChannelType, ComponentType, EmbedBuilder,\r\n\tPermissionFlagsBits, PermissionsBitField, Role, StringSelectMenuBuilder, time\r\n} from \"discord.js\";\r\n\r\nimport { EmbedCorrect } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { Precommand } from \"@typings/modules/discord\";\r\n\r\nconst roleInfo: Precommand = {\r\n  name: \"roleinfo\",\r\n  description: \"Shows detailed information about a role with interactive components\",\r\n  examples: [\"roleinfo @Moderator\", \"roleinfo Admins\", \"/roleinfo role: Moderator\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  aliases: [\"r-info\", \"role-info\"],\r\n  botpermissions: [\"SendMessages\", \"EmbedLinks\", \"ManageMessages\"],\r\n  permissions: [\"SendMessages\"],\r\n  async execute(_client, message, args) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n\r\n    try {\r\n      const roleName = args.join(\" \");\r\n      if (!roleName) {\r\n        return message.reply({\r\n          content: \"‚ùå Please specify a role name or mention.\",\r\n          allowedMentions: { repliedUser: false },\r\n        });\r\n      }\r\n\r\n      // Find the role\r\n      const role =\r\n        message.mentions.roles.first() ||\r\n        message.guild.roles.cache.find((r) => r.name.toLowerCase() === roleName.toLowerCase());\r\n\r\n      if (!role || !(role instanceof Role)) {\r\n        return message.reply({\r\n          content: \"‚ùå Role not found or invalid. Please check the name and try again.\",\r\n          allowedMentions: { repliedUser: false },\r\n        });\r\n      }\r\n\r\n      // Fetch members for accurate count\r\n      await message.guild.members.fetch();\r\n\r\n      // Create the main embed\r\n      const mainEmbed = createMainRoleEmbed(role);\r\n\r\n      // Create buttons\r\n      const buttons = new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n        new ButtonBuilder()\r\n          .setCustomId(\"permissions\")\r\n          .setLabel(\"View Permissions\")\r\n          .setStyle(ButtonStyle.Primary)\r\n          .setEmoji(\"üîë\"),\r\n        new ButtonBuilder()\r\n          .setCustomId(\"members\")\r\n          .setLabel(`View Members (${role.members.size})`)\r\n          .setStyle(ButtonStyle.Secondary)\r\n          .setEmoji(\"üë•\"),\r\n        new ButtonBuilder()\r\n          .setCustomId(\"compare\")\r\n          .setLabel(\"Compare to My Roles\")\r\n          .setStyle(ButtonStyle.Success)\r\n          .setDisabled(true)\r\n          .setEmoji(\"‚öñÔ∏è\"),\r\n        new ButtonBuilder().setCustomId(\"delete\").setLabel(\"Delete\").setStyle(ButtonStyle.Danger).setEmoji(\"üóëÔ∏è\"),\r\n      );\r\n\r\n      // Send the initial message\r\n      const infoMessage = await message.reply({\r\n        embeds: [mainEmbed],\r\n        components: [buttons],\r\n        allowedMentions: { repliedUser: false },\r\n      });\r\n\r\n      // Create a collector for interactions\r\n      const collector = infoMessage.createMessageComponentCollector({\r\n        componentType: ComponentType.Button,\r\n        time: 300_000, // 5 minutes\r\n      });\r\n\r\n      collector.on(\"collect\", async (interaction) => {\r\n        if (interaction.user.id !== message.author.id) {\r\n          return interaction.reply({\r\n            content: \"‚ùå This interaction is not for you!\",\r\n            flags: \"Ephemeral\",\r\n          });\r\n        }\r\n\r\n        try {\r\n          switch (interaction.customId) {\r\n            case \"permissions\":\r\n              await handlePermissions(interaction, role);\r\n              break;\r\n            case \"members\":\r\n              await handleMembers(interaction, role);\r\n              break;\r\n            case \"compare\":\r\n              await handleCompare(interaction, role, message.member!);\r\n              break;\r\n            case \"delete\":\r\n              await infoMessage.delete();\r\n              break;\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Error handling interaction:\", error);\r\n          await interaction.reply({\r\n            content: \"‚ùå An error occurred while processing your request.\",\r\n            flags: \"Ephemeral\",\r\n          });\r\n        }\r\n\r\n        return;\r\n      });\r\n\r\n      collector.on(\"end\", () => {\r\n        infoMessage.edit({ components: [] }).catch(() => {});\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error in roleinfo command:\", error);\r\n      message\r\n        .reply({\r\n          content: \"‚ùå An error occurred while fetching role information.\",\r\n          allowedMentions: { repliedUser: false },\r\n        })\r\n        .catch(() => {});\r\n    }\r\n\r\n    return;\r\n  },\r\n};\r\n\r\n// Helper functions\r\nfunction createMainRoleEmbed(role: any) {\r\n  return new EmbedCorrect()\r\n    .setColor(role.color || \"#2b2d31\")\r\n    .setTitle(`Role Information: ${role.name}`)\r\n    .setThumbnail(role.iconURL({ size: 4096 }))\r\n    .addFields(\r\n      { name: \"üÜî ID\", value: role.id, inline: true },\r\n      { name: \"üé® Color\", value: role.hexColor, inline: true },\r\n      { name: \"üìä Position\", value: `#${role.position}`, inline: true },\r\n      { name: \"üë• Members\", value: role.members.size.toString(), inline: true },\r\n      {\r\n        name: \"üìÖ Created\",\r\n        value: time(Math.floor(role.createdTimestamp / 1000), \"R\"),\r\n        inline: true,\r\n      },\r\n      { name: \"üîù Hoisted\", value: role.hoist ? \"‚úÖ Yes\" : \"‚ùå No\", inline: true },\r\n      { name: \"üîî Mentionable\", value: role.mentionable ? \"‚úÖ Yes\" : \"‚ùå No\", inline: true },\r\n      { name: \"ü§ñ Managed\", value: role.managed ? \"‚úÖ Yes\" : \"‚ùå No\", inline: true },\r\n      { name: \"üõ°Ô∏è Permissions\", value: `Click the \"View Permissions\" button below`, inline: false },\r\n    )\r\n    .setFooter({ text: \"Use the buttons below for more information\" });\r\n}\r\n\r\nasync function handlePermissions(interaction: any, role: any) {\r\n  const permissions = role.permissions.toArray();\r\n  const permissionChunks = chunkArray(permissions, 10);\r\n\r\n  const selectMenu = new ActionRowBuilder<StringSelectMenuBuilder>().addComponents(\r\n    new StringSelectMenuBuilder()\r\n      .setCustomId(\"permission_page\")\r\n      .setPlaceholder(\"Select a permission category\")\r\n      .addOptions(\r\n        {\r\n          label: \"General Permissions\",\r\n          value: \"general\",\r\n          description: \"View general server permissions\",\r\n        },\r\n        {\r\n          label: \"Membership Permissions\",\r\n          value: \"membership\",\r\n          description: \"View member management permissions\",\r\n        },\r\n        {\r\n          label: \"Text Permissions\",\r\n          value: \"text\",\r\n          description: \"View text channel permissions\",\r\n        },\r\n        {\r\n          label: \"Voice Permissions\",\r\n          value: \"voice\",\r\n          description: \"View voice channel permissions\",\r\n        },\r\n        {\r\n          label: \"Stage Permissions\",\r\n          value: \"stage\",\r\n          description: \"View stage channel permissions\",\r\n        },\r\n      ),\r\n  );\r\n\r\n  const embed = new EmbedBuilder()\r\n    .setColor(role.color || \"#2b2d31\")\r\n    .setTitle(`Permissions for ${role.name}`)\r\n    .setDescription(\r\n      permissions.length > 0\r\n        ? `**Total Permissions:** ${permissions.length}\\n\\n` +\r\n            permissionChunks[0].map((p) => `‚Ä¢ ${formatPermission(p)}`).join(\"\\n\")\r\n        : \"This role has no special permissions.\",\r\n    )\r\n    .setFooter({ text: `Page 1/${permissionChunks.length}` });\r\n\r\n  await interaction.reply({\r\n    embeds: [embed],\r\n    components: [selectMenu],\r\n    flags: \"Ephemeral\",\r\n  });\r\n\r\n  // Handle select menu interaction\r\n  const filter = (i: any) => i.user.id === interaction.user.id;\r\n  const collector = interaction.channel.createMessageComponentCollector({\r\n    filter,\r\n    componentType: ComponentType.StringSelect,\r\n    time: 60000,\r\n  });\r\n\r\n  collector.on(\"collect\", async (i: any) => {\r\n    if (i.customId === \"permission_page\") {\r\n      const category = i.values[0];\r\n      let filteredPermissions: string[] = [];\r\n\r\n      switch (category) {\r\n        case \"general\":\r\n          filteredPermissions = permissions.filter(\r\n            (p: any) =>\r\n              (Object.values(PermissionFlagsBits).includes(p) && p.startsWith(\"Administrator\")) ||\r\n              p.startsWith(\"Manage\") ||\r\n              p.startsWith(\"View\"),\r\n          );\r\n          break;\r\n        case \"membership\":\r\n          filteredPermissions = permissions.filter(\r\n            (p: any) => p.includes(\"Member\") || p.includes(\"Nickname\") || p.includes(\"Ban\") || p.includes(\"Kick\"),\r\n          );\r\n          break;\r\n        case \"text\":\r\n          filteredPermissions = permissions.filter(\r\n            (p: any) => p.includes(\"Message\") || p.includes(\"Embed\") || p.includes(\"Channel\") || p.includes(\"Thread\"),\r\n          );\r\n          break;\r\n        case \"voice\":\r\n          filteredPermissions = permissions.filter(\r\n            (p: any) => p.includes(\"Voice\") || p.includes(\"Speak\") || p.includes(\"Stream\"),\r\n          );\r\n          break;\r\n        case \"stage\":\r\n          filteredPermissions = permissions.filter((p: any) => p.includes(\"Stage\") || p.includes(\"RequestToSpeak\"));\r\n          break;\r\n      }\r\n\r\n      const updatedEmbed = new EmbedBuilder()\r\n        .setColor(role.color || \"#2b2d31\")\r\n        .setTitle(`Permissions for ${role.name} (${category})`)\r\n        .setDescription(\r\n          filteredPermissions.length > 0\r\n            ? filteredPermissions.map((p) => `‚Ä¢ ${formatPermission(p)}`).join(\"\\n\")\r\n            : `No ${category} permissions found for this role.`,\r\n        );\r\n\r\n      await i.update({ embeds: [updatedEmbed] });\r\n    }\r\n  });\r\n}\r\n\r\nasync function handleMembers(interaction: any, role: any) {\r\n  const members = role.members;\r\n  if (members.size === 0) {\r\n    return interaction.reply({\r\n      content: `‚ùå There are no members with the ${role.name} role.`,\r\n      flags: \"Ephemeral\",\r\n    });\r\n  }\r\n\r\n  const memberList = members.map((m: any) => `‚Ä¢ ${m.user.tag} (${m.user.id})`).join(\"\\n\");\r\n  const memberChunks = chunkArray(memberList.split(\"\\n\"), 10);\r\n  let currentPage = 0;\r\n\r\n  const embed = new EmbedBuilder()\r\n    .setColor(role.color || \"#2b2d31\")\r\n    .setTitle(`Members with ${role.name} role (${members.size})`)\r\n    .setDescription(memberChunks[currentPage].join(\"\\n\"))\r\n    .setFooter({ text: `Page ${currentPage + 1}/${memberChunks.length}` });\r\n\r\n  const buttons = new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n    new ButtonBuilder().setCustomId(\"prev\").setLabel(\"Previous\").setStyle(ButtonStyle.Secondary).setDisabled(true),\r\n    new ButtonBuilder()\r\n      .setCustomId(\"next\")\r\n      .setLabel(\"Next\")\r\n      .setStyle(ButtonStyle.Primary)\r\n      .setDisabled(memberChunks.length <= 1),\r\n    new ButtonBuilder().setCustomId(\"close\").setLabel(\"Close\").setStyle(ButtonStyle.Danger),\r\n  );\r\n\r\n  const reply = await interaction.reply({\r\n    embeds: [embed],\r\n    components: [buttons],\r\n    flags: \"Ephemeral\",\r\n  });\r\n\r\n  const collector = reply.createMessageComponentCollector({\r\n    componentType: ComponentType.Button,\r\n    time: 300000,\r\n  });\r\n\r\n  collector.on(\"collect\", async (i: any) => {\r\n    if (i.customId === \"prev\" && currentPage > 0) {\r\n      currentPage--;\r\n    } else if (i.customId === \"next\" && currentPage < memberChunks.length - 1) {\r\n      currentPage++;\r\n    } else if (i.customId === \"close\") {\r\n      collector.stop();\r\n      return i.update({ components: [] });\r\n    }\r\n\r\n    buttons.components[0].setDisabled(currentPage === 0);\r\n    buttons.components[1].setDisabled(currentPage === memberChunks.length - 1);\r\n\r\n    const updatedEmbed = new EmbedBuilder()\r\n      .setColor(role.color || \"#2b2d31\")\r\n      .setTitle(`Members with ${role.name} role (${members.size})`)\r\n      .setDescription(memberChunks[currentPage].join(\"\\n\"))\r\n      .setFooter({ text: `Page ${currentPage + 1}/${memberChunks.length}` });\r\n\r\n    await i.update({ embeds: [updatedEmbed], components: [buttons] });\r\n  });\r\n\r\n  collector.on(\"end\", () => {\r\n    reply.edit({ components: [] }).catch(() => {});\r\n  });\r\n}\r\n\r\nasync function handleCompare(interaction: any, role: any, member: any) {\r\n  if (!role || typeof role.comparePositionTo !== \"function\") {\r\n    return interaction.reply({\r\n      content: \"‚ùå The role provided is invalid or could not be found.\",\r\n      flags: \"Ephemeral\",\r\n    });\r\n  }\r\n\r\n  const memberRoles = member.roles.cache;\r\n  const hasRole = memberRoles.has(role.id);\r\n  const higherThanUser = role.comparePositionTo(memberRoles.highest) > 0;\r\n\r\n  const embed = new EmbedBuilder()\r\n    .setColor(role.color || \"#2b2d31\")\r\n    .setTitle(`Role Comparison: ${role.name}`)\r\n    .addFields(\r\n      {\r\n        name: \"You have this role\",\r\n        value: hasRole ? \"‚úÖ Yes\" : \"‚ùå No\",\r\n        inline: true,\r\n      },\r\n      {\r\n        name: \"Role is higher than yours\",\r\n        value: higherThanUser ? \"‚úÖ Yes\" : \"‚ùå No\",\r\n        inline: true,\r\n      },\r\n      {\r\n        name: \"Your permissions vs role\",\r\n        value: \"See below for detailed comparison\",\r\n        inline: false,\r\n      },\r\n    );\r\n\r\n  // Compare permissions\r\n  const memberPermissions = new PermissionsBitField(member.permissions);\r\n  const rolePermissions = role.permissions;\r\n\r\n  const missingPermissions = rolePermissions.missing(memberPermissions);\r\n  const extraPermissions = memberPermissions.missing(rolePermissions);\r\n\r\n  if (missingPermissions.length > 0) {\r\n    embed.addFields({\r\n      name: \"‚ùå Permissions you don't have\",\r\n      value: missingPermissions.map((p: any) => `‚Ä¢ ${formatPermission(p)}`).join(\"\\n\"),\r\n      inline: false,\r\n    });\r\n  }\r\n\r\n  if (extraPermissions.length > 0) {\r\n    embed.addFields({\r\n      name: \"‚úÖ Permissions you have but role doesn't\",\r\n      value: extraPermissions.map((p) => `‚Ä¢ ${formatPermission(p)}`).join(\"\\n\"),\r\n      inline: false,\r\n    });\r\n  }\r\n\r\n  if (missingPermissions.length === 0 && extraPermissions.length === 0) {\r\n    embed.addFields({\r\n      name: \"üîπ Permissions\",\r\n      value: \"You have exactly the same permissions as this role\",\r\n      inline: false,\r\n    });\r\n  }\r\n\r\n  await interaction.reply({ embeds: [embed], flags: \"Ephemeral\" });\r\n}\r\n\r\n// Utility functions\r\nfunction chunkArray(array: any[], size: number) {\r\n  const chunks = [];\r\n  for (let i = 0; i < array.length; i += size) {\r\n    chunks.push(array.slice(i, i + size));\r\n  }\r\n  return chunks;\r\n}\r\n\r\nfunction formatPermission(permission: string) {\r\n  return permission\r\n    .split(/(?=[A-Z])/)\r\n    .join(\" \")\r\n    .toLowerCase()\r\n    .replace(/\\b\\w/g, (l) => l.toUpperCase());\r\n}\r\n\r\nexport = roleInfo;\r\n"],"names":[],"mappings":"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","debug_id":"0671e381-f660-5a9d-b267-058e374e57ac"}