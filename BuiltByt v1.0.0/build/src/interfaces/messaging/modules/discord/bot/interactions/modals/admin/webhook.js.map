{"version":3,"file":"webhook.js","sources":["src/interfaces/messaging/modules/discord/bot/interactions/modals/admin/webhook.ts"],"sourceRoot":"/","sourcesContent":["import { main } from \"@/main\";\r\nimport { EmbedCorrect, ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { Modals } from \"@typings/modules/discord\";\r\n\r\nconst modalWebhook: Modals = {\r\n  id: \"modal-webhook-config\",\r\n  tickets: false,\r\n  owner: false,\r\n  permissions: [\"SendMessages\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  async execute(interaction, client) {\r\n    const input = interaction.fields.getTextInputValue(\"input-webhook-url\");\r\n    if (!interaction.guild || !interaction.channel || !client.user) return;\r\n\r\n    const data = await main.DB.findDiscord(client.user.id);\r\n\r\n    if (!data)\r\n      return interaction.reply({\r\n        embeds: [\r\n          new ErrorEmbed()\r\n            .setTitle(\"Error Configuration\")\r\n            .setDescription(\r\n              [\r\n                `${client.getEmoji(interaction.guild.id, \"error\")} **Error**`,\r\n                `No configuration found for this server.`,\r\n              ].join(\"\\n\"),\r\n            ),\r\n        ],\r\n        flags: \"Ephemeral\",\r\n      });\r\n\r\n    await main.prisma.discord.update({\r\n      where: {\r\n        clientId: client.user?.id as string,\r\n      },\r\n      data: {\r\n        webhookURL: input,\r\n      },\r\n    });\r\n\r\n    return await interaction.reply({\r\n      embeds: [\r\n        new EmbedCorrect()\r\n          .setTitle(\"Webhook Configuration\")\r\n          .setDescription(\r\n            [\r\n              `${client.getEmoji(interaction.guild.id, \"correct\")} **Success**`,\r\n              `The webhook URL has been set to: \\`${input}\\``,\r\n            ].join(\"\\n\"),\r\n          ),\r\n      ],\r\n      flags: \"Ephemeral\",\r\n    });\r\n  },\r\n};\r\n\r\nexport = modalWebhook;\r\n"],"names":[],"mappings":";;;AAAA,iCAA8B;AAC9B,2EAAmF;AAGnF,MAAM,YAAY,GAAW;IAC3B,EAAE,EAAE,sBAAsB;IAC1B,OAAO,EAAE,KAAK;IACd,KAAK,EAAE,KAAK;IACZ,WAAW,EAAE,CAAC,cAAc,CAAC;IAC7B,cAAc,EAAE,CAAC,cAAc,CAAC;IAChC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM;QAC/B,MAAM,KAAK,GAAG,WAAW,CAAC,MAAM,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,CAAC;QACxE,IAAI,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI;YAAE,OAAO;QAEvE,MAAM,IAAI,GAAG,MAAM,WAAI,CAAC,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAEvD,IAAI,CAAC,IAAI;YACP,OAAO,WAAW,CAAC,KAAK,CAAC;gBACvB,MAAM,EAAE;oBACN,IAAI,0BAAU,EAAE;yBACb,QAAQ,CAAC,qBAAqB,CAAC;yBAC/B,cAAc,CACb;wBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,YAAY;wBAC7D,yCAAyC;qBAC1C,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;iBACJ;gBACD,KAAK,EAAE,WAAW;aACnB,CAAC,CAAC;QAEL,MAAM,WAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAC/B,KAAK,EAAE;gBACL,QAAQ,EAAE,MAAM,CAAC,IAAI,EAAE,EAAY;aACpC;YACD,IAAI,EAAE;gBACJ,UAAU,EAAE,KAAK;aAClB;SACF,CAAC,CAAC;QAEH,OAAO,MAAM,WAAW,CAAC,KAAK,CAAC;YAC7B,MAAM,EAAE;gBACN,IAAI,4BAAY,EAAE;qBACf,QAAQ,CAAC,uBAAuB,CAAC;qBACjC,cAAc,CACb;oBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,CAAC,cAAc;oBACjE,sCAAsC,KAAK,IAAI;iBAChD,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;aACJ;YACD,KAAK,EAAE,WAAW;SACnB,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAEF,iBAAS,YAAY,CAAC","debug_id":"f3355c2d-a127-5123-8226-be967feecae2"}