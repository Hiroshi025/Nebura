{"version":3,"file":"docker.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/utilities/docker.ts"],"sourceRoot":"/","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n\tActionRowBuilder, ButtonBuilder, ButtonStyle, ChannelType, ComponentType, EmbedBuilder,\r\n\tModalBuilder, StringSelectMenuBuilder, TextInputBuilder, TextInputStyle\r\n} from \"discord.js\";\r\n\r\nimport { DockerImage, DockerImageDetail, Precommand } from \"@typings/modules/discord\";\r\n\r\nconst commandDocker: Precommand = {\r\n  name: \"docker\",\r\n  description: \"Search for Docker images and display detailed information\",\r\n  examples: [\"docker <image-name>\", \"docker nginx\", \"docker postgres\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  aliases: [\"dockerhub\", \"docker-image\"],\r\n  botpermissions: [\"SendMessages\", \"EmbedLinks\"],\r\n  permissions: [\"SendMessages\"],\r\n  async execute(_client, message, args, _prefix) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText)\r\n      return;\r\n\r\n    // If no arguments, show search modal\r\n    if (!args[0]) {\r\n      return showDockerSearchModal(message);\r\n    }\r\n\r\n    const imageName = args[0];\r\n    return searchAndDisplayDockerImages(message, imageName);\r\n  },\r\n};\r\n\r\nasync function showDockerSearchModal(message: any) {\r\n  const modal = new ModalBuilder()\r\n    .setCustomId(\"docker_search_modal\")\r\n    .setTitle(\"Search Docker Images\");\r\n\r\n  const searchInput = new TextInputBuilder()\r\n    .setCustomId(\"search_input\")\r\n    .setLabel(\"Image name to search for\")\r\n    .setStyle(TextInputStyle.Short)\r\n    .setRequired(true)\r\n    .setPlaceholder(\"e.g. nginx, postgres, redis\");\r\n\r\n  const firstActionRow = new ActionRowBuilder<TextInputBuilder>().addComponents(searchInput);\r\n  modal.addComponents(firstActionRow);\r\n\r\n  await message.showModal(modal);\r\n\r\n  // Handle modal submission\r\n  const filter = (interaction: any) => interaction.customId === \"docker_search_modal\";\r\n  message\r\n    .awaitModalSubmit({ filter, time: 60000 })\r\n    .then(async (interaction: any) => {\r\n      const imageName = interaction.fields.getTextInputValue(\"search_input\");\r\n      await interaction.deferReply();\r\n      return searchAndDisplayDockerImages(interaction, imageName);\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\nasync function searchAndDisplayDockerImages(message: any, imageName: string) {\r\n  try {\r\n    // Show loading message\r\n    const loadingEmbed = new EmbedBuilder()\r\n      .setColor(\"#0099FF\")\r\n      .setTitle(\"Searching Docker Hub\")\r\n      .setDescription(`Looking for images matching \"${imageName}\"...`)\r\n      .setFooter({ text: \"This may take a few seconds\" });\r\n\r\n    let loadingMessage;\r\n    if (message.isRepliable && message.isRepliable()) {\r\n      if (!message.replied && !message.deferred) {\r\n        await message.deferReply();\r\n      }\r\n      loadingMessage = await message.editReply({ embeds: [loadingEmbed] });\r\n    } else {\r\n      loadingMessage = await message.reply({ embeds: [loadingEmbed] });\r\n    }\r\n\r\n    // Search Docker Hub API\r\n    const response = await axios.get(\r\n      `https://hub.docker.com/v2/search/repositories/?query=${encodeURIComponent(imageName)}`,\r\n    );\r\n    const images: DockerImage[] = response.data.results.slice(0, 25); // Limit to 25 results\r\n\r\n    if (images.length === 0) {\r\n      const noResultsEmbed = new EmbedBuilder()\r\n        .setColor(\"#FF5555\")\r\n        .setTitle(\"No Docker Images Found\")\r\n        .setDescription(`No images found matching \"${imageName}\"`)\r\n        .setFooter({ text: \"Try a different search term\" });\r\n\r\n      return loadingMessage.edit({ embeds: [noResultsEmbed], components: [] });\r\n    }\r\n\r\n    // Create select menu with image options\r\n    const imageSelect = new ActionRowBuilder<StringSelectMenuBuilder>().addComponents(\r\n      new StringSelectMenuBuilder()\r\n        .setCustomId(\"docker_image_select\")\r\n        .setPlaceholder(\"Select an image for details\")\r\n        .addOptions(\r\n          images.map((image) => ({\r\n            label:\r\n              image.repo_name.length > 100\r\n                ? `${image.repo_name.substring(0, 97)}...`\r\n                : image.repo_name,\r\n            description: image.short_description\r\n              ? image.short_description.length > 50\r\n                ? `${image.short_description.substring(0, 47)}...`\r\n                : image.short_description\r\n              : \"No description\",\r\n            value: image.repo_name,\r\n          })),\r\n        ),\r\n    );\r\n\r\n    // Create buttons\r\n    const buttons = new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n      new ButtonBuilder()\r\n        .setCustomId(\"docker_refresh\")\r\n        .setLabel(\"Refresh Results\")\r\n        .setStyle(ButtonStyle.Secondary),\r\n      new ButtonBuilder()\r\n        .setCustomId(\"docker_new_search\")\r\n        .setLabel(\"New Search\")\r\n        .setStyle(ButtonStyle.Primary),\r\n    );\r\n\r\n    const resultsEmbed = new EmbedBuilder()\r\n      .setColor(\"#0099FF\")\r\n      .setTitle(`Docker Image Search Results (${images.length})`)\r\n      .setDescription(`Found ${images.length} images matching \"${imageName}\"`)\r\n      .addFields(\r\n        {\r\n          name: \"Top Results\",\r\n          value: images\r\n            .slice(0, 5)\r\n            .map((img) => `• ${img.repo_name}`)\r\n            .join(\"\\n\"),\r\n          inline: true,\r\n        },\r\n        {\r\n          name: \"Stars\",\r\n          value: images\r\n            .slice(0, 5)\r\n            .map((img) => `⭐ ${img.star_count}`)\r\n            .join(\"\\n\"),\r\n          inline: true,\r\n        },\r\n        {\r\n          name: \"Pulls\",\r\n          value: images\r\n            .slice(0, 5)\r\n            .map((img) => `📥 ${img.pull_count}`)\r\n            .join(\"\\n\"),\r\n          inline: true,\r\n        },\r\n      )\r\n      .setFooter({ text: \"Select an image from the menu below for more details\" });\r\n\r\n    await loadingMessage.edit({\r\n      embeds: [resultsEmbed],\r\n      components: [imageSelect, buttons],\r\n    });\r\n\r\n    // Create collector for interactions\r\n    const collector = loadingMessage.createMessageComponentCollector({\r\n      time: 60000,\r\n    });\r\n\r\n    collector.on(\"collect\", async (interaction: any) => {\r\n      if (!interaction.isStringSelectMenu() && !interaction.isButton()) return;\r\n      await interaction.deferUpdate();\r\n\r\n      if (interaction.isStringSelectMenu()) {\r\n        // Handle image selection\r\n        const selectedImageName = interaction.values[0];\r\n        const selectedImage = images.find((img) => img.repo_name === selectedImageName);\r\n        if (selectedImage) {\r\n          await showDockerImageDetails(interaction, selectedImage);\r\n        }\r\n      } else if (interaction.isButton()) {\r\n        switch (interaction.customId) {\r\n          case \"docker_refresh\":\r\n            await searchAndDisplayDockerImages(interaction, imageName);\r\n            break;\r\n          case \"docker_new_search\":\r\n            await showDockerSearchModal(interaction);\r\n            break;\r\n        }\r\n      }\r\n    });\r\n\r\n    collector.on(\"end\", () => {\r\n      loadingMessage.edit({ components: [] }).catch(() => {});\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error searching Docker images:\", error);\r\n\r\n    const errorEmbed = new EmbedBuilder()\r\n      .setColor(\"#FF0000\")\r\n      .setTitle(\"Error Searching Docker Hub\")\r\n      .setDescription(\"Failed to search for Docker images. Please try again later.\")\r\n      .setFooter({ text: `Error: ${error instanceof Error ? error.message : \"Unknown error\"}` });\r\n\r\n    message.reply({ embeds: [errorEmbed] });\r\n  }\r\n}\r\n\r\nasync function showDockerImageDetails(interaction: any, image: DockerImage) {\r\n  try {\r\n    // Fetch detailed information about the image\r\n    const response = await axios.get(`https://hub.docker.com/v2/repositories/${image.repo_name}/`);\r\n    const details: DockerImageDetail = response.data;\r\n\r\n    // Fetch tags for the image\r\n    const tagsResponse = await axios.get(\r\n      `https://hub.docker.com/v2/repositories/${image.repo_name}/tags/?page_size=10`,\r\n    );\r\n    const tags = tagsResponse.data.results.map((tag: any) => tag.name);\r\n\r\n    // Create embed with detailed information\r\n    const detailEmbed = new EmbedBuilder()\r\n      .setColor(\"#2496ED\") // Docker blue\r\n      .setTitle(image.repo_name)\r\n      .setURL(`https://hub.docker.com/r/${image.repo_name}`)\r\n      .setDescription(\r\n        details.full_description || image.short_description || \"No description available\",\r\n      )\r\n      .addFields(\r\n        { name: \"Stars\", value: `⭐ ${image.star_count.toLocaleString()}`, inline: true },\r\n        { name: \"Pulls\", value: `📥 ${image.pull_count.toLocaleString()}`, inline: true },\r\n        {\r\n          name: \"Last Updated\",\r\n          value: details.last_updated\r\n            ? new Date(details.last_updated).toLocaleDateString()\r\n            : \"Unknown\",\r\n          inline: true,\r\n        },\r\n        { name: \"Official\", value: image.is_official ? \"✅ Yes\" : \"❌ No\", inline: true },\r\n        { name: \"Automated\", value: image.is_automated ? \"✅ Yes\" : \"❌ No\", inline: true },\r\n        { name: \"Publisher\", value: details.user || \"Unknown\", inline: true },\r\n        {\r\n          name: \"Recent Tags\",\r\n          value: tags.length > 0 ? tags.join(\", \") : \"No tags found\",\r\n          inline: false,\r\n        },\r\n      )\r\n      .setFooter({ text: \"Docker Hub\" });\r\n\r\n    // Create buttons\r\n    const buttons = new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n      new ButtonBuilder()\r\n        .setLabel(\"View on Docker Hub\")\r\n        .setURL(`https://hub.docker.com/r/${image.repo_name}`)\r\n        .setStyle(ButtonStyle.Link),\r\n      new ButtonBuilder()\r\n        .setCustomId(\"docker_view_all_tags\")\r\n        .setLabel(\"View All Tags\")\r\n        .setStyle(ButtonStyle.Secondary)\r\n        .setDisabled(tags.length === 0),\r\n      new ButtonBuilder()\r\n        .setCustomId(\"docker_back_to_results\")\r\n        .setLabel(\"Back to Results\")\r\n        .setStyle(ButtonStyle.Primary),\r\n    );\r\n\r\n    if (interaction.isRepliable && interaction.isRepliable()) {\r\n      if (!interaction.replied && !interaction.deferred) {\r\n        await interaction.reply({ embeds: [detailEmbed], components: [buttons] });\r\n      } else {\r\n        await interaction.editReply({ embeds: [detailEmbed], components: [buttons] });\r\n      }\r\n    }\r\n\r\n    // Handle button interactions\r\n    const collector = interaction.message.createMessageComponentCollector({\r\n      time: 60000,\r\n    });\r\n\r\n    collector.on(\"collect\", async (btnInteraction: any) => {\r\n      if (!btnInteraction.isButton()) return;\r\n\r\n      await btnInteraction.deferUpdate();\r\n\r\n      switch (btnInteraction.customId) {\r\n        case \"docker_view_all_tags\":\r\n          await showAllTags(btnInteraction, image.repo_name);\r\n          break;\r\n        case \"docker_back_to_results\":\r\n          await interaction.editReply({\r\n            embeds: [interaction.message.embeds[0]],\r\n            components: interaction.message.components,\r\n          });\r\n          break;\r\n      }\r\n    });\r\n\r\n    collector.on(\"end\", () => {\r\n      interaction.message.edit({ components: [] }).catch(() => {});\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error fetching Docker image details:\", error);\r\n\r\n    const errorEmbed = new EmbedBuilder()\r\n      .setColor(\"#FF0000\")\r\n      .setTitle(\"Error Fetching Image Details\")\r\n      .setDescription(\"Failed to fetch detailed information for this Docker image.\")\r\n      .setFooter({ text: `Error: ${error instanceof Error ? error.message : \"Unknown error\"}` });\r\n\r\n    interaction.editReply({ embeds: [errorEmbed] });\r\n  }\r\n}\r\n\r\nasync function showAllTags(interaction: any, imageName: string) {\r\n  try {\r\n    // Fetch all tags for the image\r\n    const response = await axios.get(\r\n      `https://hub.docker.com/v2/repositories/${imageName}/tags/?page_size=50`,\r\n    );\r\n    const tags = response.data.results.map((tag: any) => tag.name);\r\n\r\n    if (tags.length === 0) {\r\n      const noTagsEmbed = new EmbedBuilder()\r\n        .setColor(\"#FF5555\")\r\n        .setTitle(\"No Tags Found\")\r\n        .setDescription(`No tags found for image ${imageName}`);\r\n\r\n      return interaction.editReply({ embeds: [noTagsEmbed] });\r\n    }\r\n\r\n    // Create paginated tag list\r\n    const pages: EmbedBuilder[] = [];\r\n    const tagsPerPage = 10;\r\n\r\n    for (let i = 0; i < tags.length; i += tagsPerPage) {\r\n      const pageTags = tags.slice(i, i + tagsPerPage);\r\n\r\n      const tagEmbed = new EmbedBuilder()\r\n        .setColor(\"#2496ED\")\r\n        .setTitle(`Tags for ${imageName}`)\r\n        .setDescription(pageTags.map((tag: any) => `• ${tag}`).join(\"\\n\"))\r\n        .setFooter({\r\n          text: `Page ${Math.floor(i / tagsPerPage) + 1}/${Math.ceil(tags.length / tagsPerPage)} | Total tags: ${tags.length}`,\r\n        });\r\n\r\n      pages.push(tagEmbed);\r\n    }\r\n\r\n    let currentPage = 0;\r\n    const tagMessage = await interaction.editReply({\r\n      embeds: [pages[currentPage]],\r\n      components: [createPaginationButtons(currentPage, pages.length, \"tags\")], // <-- array\r\n    });\r\n\r\n    // Handle pagination\r\n    const paginationCollector = tagMessage.createMessageComponentCollector({\r\n      componentType: ComponentType.Button,\r\n      time: 60000,\r\n    });\r\n\r\n    paginationCollector.on(\"collect\", async (pageInteraction: any) => {\r\n      if (!pageInteraction.isButton()) return;\r\n\r\n      await pageInteraction.deferUpdate();\r\n\r\n      const action = pageInteraction.customId.split(\"_\")[1];\r\n\r\n      if (action === \"prev\" && currentPage > 0) {\r\n        currentPage--;\r\n      } else if (action === \"next\" && currentPage < pages.length - 1) {\r\n        currentPage++;\r\n      } else if (action === \"close\") {\r\n        return pageInteraction.deleteReply();\r\n      }\r\n\r\n      await pageInteraction.editReply({\r\n        embeds: [pages[currentPage]],\r\n        components: [createPaginationButtons(currentPage, pages.length, \"tags\")], // <-- array\r\n      });\r\n    });\r\n\r\n    paginationCollector.on(\"end\", () => {\r\n      tagMessage.edit({ components: [] }).catch(() => {});\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error fetching Docker image tags:\", error);\r\n\r\n    const errorEmbed = new EmbedBuilder()\r\n      .setColor(\"#FF0000\")\r\n      .setTitle(\"Error Fetching Tags\")\r\n      .setDescription(\"Failed to fetch tags for this Docker image.\")\r\n      .setFooter({ text: `Error: ${error instanceof Error ? error.message : \"Unknown error\"}` });\r\n\r\n    interaction.editReply({ embeds: [errorEmbed] });\r\n  }\r\n}\r\n\r\nfunction createPaginationButtons(currentPage: number, totalPages: number, type: string) {\r\n  return new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n    new ButtonBuilder()\r\n      .setCustomId(`${type}_prev`)\r\n      .setLabel(\"◀\")\r\n      .setStyle(ButtonStyle.Primary)\r\n      .setDisabled(currentPage === 0),\r\n    new ButtonBuilder()\r\n      .setCustomId(`${type}_next`)\r\n      .setLabel(\"▶\")\r\n      .setStyle(ButtonStyle.Primary)\r\n      .setDisabled(currentPage === totalPages - 1),\r\n    new ButtonBuilder().setCustomId(`${type}_close`).setLabel(\"✖\").setStyle(ButtonStyle.Danger),\r\n  );\r\n}\r\n\r\nexport = commandDocker;\r\n"],"names":[],"mappings":"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","debug_id":"36a8d7e0-7171-50d8-ae9d-4aeb1c24d14b"}