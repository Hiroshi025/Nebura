{"version":3,"file":"logs-config.js","sources":["src/interfaces/messaging/modules/discord/bot/interactions/modals/admin/logs-config.ts"],"sourceRoot":"/","sourcesContent":["import { main } from \"@/main\";\r\nimport { EmbedCorrect, ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { Modals } from \"@typings/modules/discord\";\r\n\r\nconst modalLogsEvents: Modals = {\r\n  id: \"button-enabled-logevents-modal\",\r\n  tickets: false,\r\n  owner: false,\r\n  permissions: [\"SendMessages\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  async execute(interaction, client) {\r\n    const channelId = interaction.fields.getTextInputValue(\"button-enabled-logevents-channelId\");\r\n    const eventsToLog = interaction.fields.getTextInputValue(\"button-enabled-logevents-events\");\r\n    if (!interaction.guild || !interaction.channel) return;\r\n\r\n    const events = eventsToLog.split(\",\").map((event) => event.trim());\r\n    const data = await main.prisma.myGuild.findUnique({ where: { guildId: interaction.guild.id } });\r\n    if (!data)\r\n      return interaction.reply({\r\n        embeds: [\r\n          new ErrorEmbed().setTitle(\"Error - Logs Configuration\").setDescription(\r\n            [\r\n              `${client.getEmoji(interaction.guild.id, \"error\")} \r\n            **No data found for this server.**`,\r\n              `Please make sure the bot is set up correctly and try again.`,\r\n            ].join(\"\\n\"),\r\n          ),\r\n        ],\r\n      });\r\n\r\n    let newEvents: string[] = [];\r\n    // a los eventos ya existes aÃ±ade los nuevos pero que no se repitan los eventos\r\n    if (data.eventlogs && data.eventlogs.events) {\r\n      newEvents = data.eventlogs.events.filter((event) => !events.includes(event));\r\n    }\r\n\r\n    await main.prisma.myGuild.update({\r\n      where: { guildId: interaction.guild.id },\r\n      data: {\r\n        eventlogs: {\r\n          channelId: channelId,\r\n          events: newEvents.concat(events),\r\n          enabled: true,\r\n        },\r\n      },\r\n    });\r\n\r\n    await interaction.reply({\r\n      embeds: [\r\n        new EmbedCorrect()\r\n          .setTitle(\"Logs Configuration\")\r\n          .setDescription(\r\n            [\r\n              `${client.getEmoji(interaction.guild.id, \"success\")} **Logs configuration updated successfully!**`,\r\n              `**__Data Information_**`,\r\n              `**Channel ID:** ${channelId}`,\r\n              `**Events to Log:*`,\r\n              `\\`\\`\\`json`,\r\n              `${JSON.stringify(events, null, 2)}`,\r\n              `\\`\\`\\``,\r\n              `**Enabled:** true`,\r\n            ].join(\"\\n\"),\r\n          ),\r\n      ],\r\n    });\r\n\r\n    return;\r\n  },\r\n};\r\n\r\nexport = modalLogsEvents;\r\n"],"names":[],"mappings":";;;AAAA,iCAA8B;AAC9B,2EAAmF;AAGnF,MAAM,eAAe,GAAW;IAC9B,EAAE,EAAE,gCAAgC;IACpC,OAAO,EAAE,KAAK;IACd,KAAK,EAAE,KAAK;IACZ,WAAW,EAAE,CAAC,cAAc,CAAC;IAC7B,cAAc,EAAE,CAAC,cAAc,CAAC;IAChC,KAAK,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM;QAC/B,MAAM,SAAS,GAAG,WAAW,CAAC,MAAM,CAAC,iBAAiB,CAAC,oCAAoC,CAAC,CAAC;QAC7F,MAAM,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC,iBAAiB,CAAC,iCAAiC,CAAC,CAAC;QAC5F,IAAI,CAAC,WAAW,CAAC,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO;YAAE,OAAO;QAEvD,MAAM,MAAM,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;QACnE,MAAM,IAAI,GAAG,MAAM,WAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAChG,IAAI,CAAC,IAAI;YACP,OAAO,WAAW,CAAC,KAAK,CAAC;gBACvB,MAAM,EAAE;oBACN,IAAI,0BAAU,EAAE,CAAC,QAAQ,CAAC,4BAA4B,CAAC,CAAC,cAAc,CACpE;wBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC;+CAChB;wBACjC,6DAA6D;qBAC9D,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;iBACF;aACF,CAAC,CAAC;QAEL,IAAI,SAAS,GAAa,EAAE,CAAC;QAC7B,+EAA+E;QAC/E,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;YAC5C,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QAC/E,CAAC;QAED,MAAM,WAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAC/B,KAAK,EAAE,EAAE,OAAO,EAAE,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE;YACxC,IAAI,EAAE;gBACJ,SAAS,EAAE;oBACT,SAAS,EAAE,SAAS;oBACpB,MAAM,EAAE,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC;oBAChC,OAAO,EAAE,IAAI;iBACd;aACF;SACF,CAAC,CAAC;QAEH,MAAM,WAAW,CAAC,KAAK,CAAC;YACtB,MAAM,EAAE;gBACN,IAAI,4BAAY,EAAE;qBACf,QAAQ,CAAC,oBAAoB,CAAC;qBAC9B,cAAc,CACb;oBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,EAAE,SAAS,CAAC,+CAA+C;oBAClG,yBAAyB;oBACzB,mBAAmB,SAAS,EAAE;oBAC9B,mBAAmB;oBACnB,YAAY;oBACZ,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE;oBACpC,QAAQ;oBACR,mBAAmB;iBACpB,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;aACJ;SACF,CAAC,CAAC;QAEH,OAAO;IACT,CAAC;CACF,CAAC;AAEF,iBAAS,eAAe,CAAC","debug_id":"de55ab24-ea04-5a31-b210-bd82e6c3127f"}