{"version":3,"file":"kick.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/admin/kick.ts"],"sourceRoot":"/","sourcesContent":["import {\r\n\tActionRowBuilder, ButtonBuilder, ButtonStyle, ChannelType, EmbedBuilder, PermissionFlagsBits\r\n} from \"discord.js\";\r\n\r\nimport { Precommand } from \"@typings/modules/discord\";\r\n\r\nconst kickCommand: Precommand = {\r\n    name: \"kick\",\r\n    description: \"Kick a user from the server\",\r\n    examples: [\r\n        \"kick @user Spamming\",\r\n        \"kick @user\"\r\n    ],\r\n    nsfw: false,\r\n    owner: false,\r\n    cooldown: 5,\r\n    aliases: [\"expulsar\"],\r\n    botpermissions: [\"KickMembers\"],\r\n    permissions: [\"KickMembers\"],\r\n    async execute(_client, message, args) {\r\n        if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n\r\n        // Permission check\r\n        if (!message.member?.permissions.has(PermissionFlagsBits.KickMembers)) {\r\n            return message.reply({\r\n                embeds: [\r\n                    new EmbedBuilder()\r\n                        .setColor(\"#FF0000\")\r\n                        .setTitle(\"‚ùå Permission Denied\")\r\n                        .setDescription(\"You need the `Kick Members` permission to use this command.\")\r\n                ]\r\n            });\r\n        }\r\n\r\n        const targetUser = message.mentions.members?.first() || message.guild.members.cache.get(args[0]);\r\n        const reason = args.slice(1).join(\" \") || \"No reason provided\";\r\n\r\n        if (!targetUser) {\r\n            return message.reply({\r\n                embeds: [\r\n                    new EmbedBuilder()\r\n                        .setColor(\"#FF0000\")\r\n                        .setTitle(\"‚ùå Invalid Usage\")\r\n                        .setDescription(\"Please mention a user or provide their ID to kick.\")\r\n                        .addFields(\r\n                            { name: \"Example\", value: \"`kick @user Spamming`\" }\r\n                        )\r\n                ]\r\n            });\r\n        }\r\n\r\n        if (targetUser.id === message.author.id) {\r\n            return message.reply({\r\n                embeds: [\r\n                    new EmbedBuilder()\r\n                        .setColor(\"#FF0000\")\r\n                        .setTitle(\"‚ùå Invalid Target\")\r\n                        .setDescription(\"You cannot kick yourself.\")\r\n                ]\r\n            });\r\n        }\r\n\r\n        if (!targetUser.kickable) {\r\n            return message.reply({\r\n                embeds: [\r\n                    new EmbedBuilder()\r\n                        .setColor(\"#FF0000\")\r\n                        .setTitle(\"‚ùå Permission Denied\")\r\n                        .setDescription(\"I cannot kick this user. They may have higher roles than me.\")\r\n                ]\r\n            });\r\n        }\r\n\r\n        // Confirmation embed\r\n        const confirmEmbed = new EmbedBuilder()\r\n            .setColor(\"#FFA500\")\r\n            .setTitle(\"‚ö†Ô∏è Confirm Kick\")\r\n            .setDescription(`Are you sure you want to kick ${targetUser}?`)\r\n            .addFields(\r\n                { name: \"Reason\", value: reason, inline: true },\r\n                { name: \"Moderator\", value: message.author.toString(), inline: true }\r\n            )\r\n            .setThumbnail(targetUser.displayAvatarURL());\r\n\r\n        const confirmButtons = new ActionRowBuilder<ButtonBuilder>()\r\n            .addComponents(\r\n                new ButtonBuilder()\r\n                    .setCustomId(\"confirm_kick\")\r\n                    .setLabel(\"Confirm Kick\")\r\n                    .setStyle(ButtonStyle.Danger),\r\n                new ButtonBuilder()\r\n                    .setCustomId(\"cancel_kick\")\r\n                    .setLabel(\"Cancel\")\r\n                    .setStyle(ButtonStyle.Secondary)\r\n            );\r\n\r\n        const confirmationMessage = await message.reply({ \r\n            embeds: [confirmEmbed], \r\n            components: [confirmButtons] \r\n        });\r\n\r\n        // Button collector\r\n        const collector = confirmationMessage.createMessageComponentCollector({ \r\n            time: 30000 \r\n        });\r\n\r\n        collector.on(\"collect\", async interaction => {\r\n            if (interaction.user.id !== message.author.id) {\r\n                return interaction.reply({\r\n                    embeds: [\r\n                        new EmbedBuilder()\r\n                            .setColor(\"#FF0000\")\r\n                            .setTitle(\"‚ùå Not Allowed\")\r\n                            .setDescription(\"Only the command author can confirm this action.\")\r\n                    ],\r\n                    ephemeral: true\r\n                });\r\n            }\r\n\r\n            if (interaction.customId === \"confirm_kick\") {\r\n                try {\r\n                    await targetUser.kick(`Kicked by ${message.author.tag}: ${reason}`);\r\n\r\n                    const successEmbed = new EmbedBuilder()\r\n                        .setColor(\"#00FF00\")\r\n                        .setTitle(\"‚úÖ User Kicked\")\r\n                        .setDescription(`${targetUser} has been successfully kicked.`)\r\n                        .addFields(\r\n                            { name: \"Reason\", value: reason, inline: true },\r\n                            { name: \"Moderator\", value: message.author.toString(), inline: true }\r\n                        )\r\n                        .setThumbnail(targetUser.displayAvatarURL())\r\n                        .setTimestamp();\r\n\r\n                    await interaction.update({ \r\n                        embeds: [successEmbed], \r\n                        components: [] \r\n                    });\r\n\r\n                    // DM the kicked user if possible\r\n                    try {\r\n                        const dmEmbed = new EmbedBuilder()\r\n                            .setColor(\"#FFA500\")\r\n                            .setTitle(`You were kicked from ${message.guild?.name}`)\r\n                            .addFields(\r\n                                { name: \"Reason\", value: reason },\r\n                                { name: \"Moderator\", value: message.author.tag }\r\n                            )\r\n                            .setFooter({ text: \"You can rejoin if the server allows it\" });\r\n\r\n                        await targetUser.send({ embeds: [dmEmbed] });\r\n                    } catch (dmError) {\r\n                        console.log(\"Could not DM user about kick:\", dmError);\r\n                    }\r\n\r\n                } catch (error) {\r\n                    console.error(\"Error kicking user:\", error);\r\n                    await interaction.update({\r\n                        embeds: [\r\n                            new EmbedBuilder()\r\n                                .setColor(\"#FF0000\")\r\n                                .setTitle(\"‚ùå Error\")\r\n                                .setDescription(\"Failed to kick the user. Please try again.\")\r\n                        ],\r\n                        components: []\r\n                    });\r\n                }\r\n\r\n            } else if (interaction.customId === \"cancel_kick\") {\r\n                await interaction.update({\r\n                    embeds: [\r\n                        new EmbedBuilder()\r\n                            .setColor(\"#7289DA\")\r\n                            .setTitle(\"üö´ Kick Cancelled\")\r\n                            .setDescription(\"The kick action has been cancelled.\")\r\n                    ],\r\n                    components: []\r\n                });\r\n            }\r\n\r\n            collector.stop();\r\n            return;\r\n        });\r\n\r\n        collector.on(\"end\", () => {\r\n            confirmationMessage.edit({ components: [] }).catch(console.error);\r\n        });\r\n\r\n        return;\r\n    }\r\n};\r\n\r\nexport = kickCommand;"],"names":[],"mappings":"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","debug_id":"a12d7f26-48a9-5964-87c7-297d7630136f"}