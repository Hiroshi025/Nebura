{"version":3,"file":"archievement.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/images/archievement.ts"],"sourceRoot":"/","sourcesContent":["import { AttachmentBuilder, ChannelType } from \"discord.js\";\r\n\r\nimport { EmbedCorrect, ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { createCanvas, loadImage } from \"@napi-rs/canvas\";\r\nimport { Precommand } from \"@typings/modules/discord\";\r\n\r\nconst achievementCommand: Precommand = {\r\n  name: \"achievement\",\r\n  description: \"The command to create an achievement image.\",\r\n  examples: [\"achievement I made a new achievement!\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  cooldown: 5,\r\n  aliases: [\"ach\", \"achieve\", \"achv\", \"achvmnt\", \"achievemnt\", \"achievement-get\", \"achievement-getter\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  permissions: [\"SendMessages\"],\r\n  async execute(client, message, args, prefix) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n    const text = args.join(\" \");\r\n    if (!text)\r\n      return message.channel.send({\r\n        embeds: [\r\n          new ErrorEmbed()\r\n            .setDescription(\r\n              [\r\n                `${client.getEmoji(message.guild.id, \"error\")} You need to provide a text to generate an achievement image!`,\r\n                `**Usage:** \\`${prefix}achievement <text>\\``,\r\n              ].join(\"\\n\"),\r\n            )\r\n            .setColor(\"Red\"),\r\n        ],\r\n      });\r\n\r\n    const background = await loadImage(\"./assets/images/achievement.png\");\r\n\r\n    const canvas = createCanvas(background.width, background.height);\r\n    const context = canvas.getContext(\"2d\");\r\n    context.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n\r\n    context.translate(120, 60);\r\n    context.font = \"24px Arial\";\r\n    context.fillStyle = \"#c2c2c2\";\r\n    context.fillText(text, 10, 22, 330);\r\n\r\n    const file = new AttachmentBuilder(canvas.toBuffer(\"image/png\"), {\r\n      name: \"achievement.png\",\r\n    });\r\n\r\n    const embed = new EmbedCorrect()\r\n      .setImage(\"attachment://achievement.png\")\r\n      .setColor(\"Random\")\r\n      .setTitle(\"PH Comment - Image\")\r\n      .setTimestamp();\r\n\r\n    await message.delete();\r\n    return await message.channel.send({ embeds: [embed], files: [file] });\r\n  },\r\n};\r\nexport = achievementCommand;\r\n"],"names":[],"mappings":";;;AAAA,2CAA4D;AAE5D,2EAAmF;AACnF,4CAA0D;AAG1D,MAAM,kBAAkB,GAAe;IACrC,IAAI,EAAE,aAAa;IACnB,WAAW,EAAE,6CAA6C;IAC1D,QAAQ,EAAE,CAAC,uCAAuC,CAAC;IACnD,IAAI,EAAE,KAAK;IACX,KAAK,EAAE,KAAK;IACZ,QAAQ,EAAE,CAAC;IACX,OAAO,EAAE,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,iBAAiB,EAAE,oBAAoB,CAAC;IACrG,cAAc,EAAE,CAAC,cAAc,CAAC;IAChC,WAAW,EAAE,CAAC,cAAc,CAAC;IAC7B,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM;QACzC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,KAAK,wBAAW,CAAC,SAAS;YAAE,OAAO;QACjG,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI;YACP,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;gBAC1B,MAAM,EAAE;oBACN,IAAI,0BAAU,EAAE;yBACb,cAAc,CACb;wBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,+DAA+D;wBAC5G,gBAAgB,MAAM,sBAAsB;qBAC7C,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;yBACA,QAAQ,CAAC,KAAK,CAAC;iBACnB;aACF,CAAC,CAAC;QAEL,MAAM,UAAU,GAAG,MAAM,IAAA,kBAAS,EAAC,iCAAiC,CAAC,CAAC;QAEtE,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACjE,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAEjE,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QAC3B,OAAO,CAAC,IAAI,GAAG,YAAY,CAAC;QAC5B,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;QAC9B,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QAEpC,MAAM,IAAI,GAAG,IAAI,8BAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;YAC/D,IAAI,EAAE,iBAAiB;SACxB,CAAC,CAAC;QAEH,MAAM,KAAK,GAAG,IAAI,4BAAY,EAAE;aAC7B,QAAQ,CAAC,8BAA8B,CAAC;aACxC,QAAQ,CAAC,QAAQ,CAAC;aAClB,QAAQ,CAAC,oBAAoB,CAAC;aAC9B,YAAY,EAAE,CAAC;QAElB,MAAM,OAAO,CAAC,MAAM,EAAE,CAAC;QACvB,OAAO,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACxE,CAAC;CACF,CAAC;AACF,iBAAS,kBAAkB,CAAC","debug_id":"6126d7c9-3c42-5e0f-bded-cb1d785a60cf"}