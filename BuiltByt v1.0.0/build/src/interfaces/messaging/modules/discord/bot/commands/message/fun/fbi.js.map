{"version":3,"file":"fbi.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/fun/fbi.ts"],"sourceRoot":"/","sourcesContent":["import { AttachmentBuilder, ChannelType } from \"discord.js\";\r\n\r\nimport { EmbedCorrect, ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { createCanvas, loadImage } from \"@napi-rs/canvas\";\r\nimport { Precommand } from \"@typings/modules/discord\";\r\n\r\nconst fbiCommand: Precommand = {\r\n  name: \"fbi\",\r\n  description: \"Generate an FBI achievement image with the provided text.\",\r\n  examples: [\"fbi <text>\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  cooldown: 5,\r\n  aliases: [\"fbihere\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  permissions: [\"SendMessages\"],\r\n  async execute(client, message, args, prefix) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n    const text = args.join(\" \");\r\n    if (!text)\r\n      return message.channel.send({\r\n        embeds: [\r\n          new ErrorEmbed().setDescription(\r\n            [\r\n              `${client.getEmoji(message.guild.id, \"error\")} You need to provide text to be displayed on the image!`,\r\n              `**Usage:** \\`${prefix}fbi <text>\\``,\r\n            ].join(\"\\n\"),\r\n          ),\r\n        ],\r\n      });\r\n\r\n    const background = await loadImage(\"./assets/images/why-fbi-here.png\");\r\n    const overlay = await loadImage(\"./assets/images/why-fbi-here-overlay.png\");\r\n    const canvas = createCanvas(background.width, background.height);\r\n    const context = canvas.getContext(\"2d\");\r\n    context.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n\r\n    context.font = \"30px Arial\";\r\n    context.fillText(text, 40, 290);\r\n\r\n    context.drawImage(overlay, 627, 0, overlay.width, overlay.height);\r\n\r\n    const file = new AttachmentBuilder(canvas.toBuffer(\"image/png\"), {\r\n      name: \"why-fbi-here.png\",\r\n    });\r\n\r\n    const embed = new EmbedCorrect()\r\n      .setImage(\"attachment://why-fbi-here.png\")\r\n      .setColor(\"Random\")\r\n      .setTitle(\"PH Comment - Image\")\r\n      .setTimestamp();\r\n\r\n    await message.delete();\r\n    return await message.channel.send({ embeds: [embed], files: [file] });\r\n  },\r\n};\r\nexport = fbiCommand;\r\n"],"names":[],"mappings":";;;AAAA,2CAA4D;AAE5D,2EAAmF;AACnF,4CAA0D;AAG1D,MAAM,UAAU,GAAe;IAC7B,IAAI,EAAE,KAAK;IACX,WAAW,EAAE,2DAA2D;IACxE,QAAQ,EAAE,CAAC,YAAY,CAAC;IACxB,IAAI,EAAE,KAAK;IACX,KAAK,EAAE,KAAK;IACZ,QAAQ,EAAE,CAAC;IACX,OAAO,EAAE,CAAC,SAAS,CAAC;IACpB,cAAc,EAAE,CAAC,cAAc,CAAC;IAChC,WAAW,EAAE,CAAC,cAAc,CAAC;IAC7B,KAAK,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM;QACzC,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,KAAK,wBAAW,CAAC,SAAS;YAAE,OAAO;QACjG,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,IAAI;YACP,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;gBAC1B,MAAM,EAAE;oBACN,IAAI,0BAAU,EAAE,CAAC,cAAc,CAC7B;wBACE,GAAG,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,yDAAyD;wBACtG,gBAAgB,MAAM,cAAc;qBACrC,CAAC,IAAI,CAAC,IAAI,CAAC,CACb;iBACF;aACF,CAAC,CAAC;QAEL,MAAM,UAAU,GAAG,MAAM,IAAA,kBAAS,EAAC,kCAAkC,CAAC,CAAC;QACvE,MAAM,OAAO,GAAG,MAAM,IAAA,kBAAS,EAAC,0CAA0C,CAAC,CAAC;QAC5E,MAAM,MAAM,GAAG,IAAA,qBAAY,EAAC,UAAU,CAAC,KAAK,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC;QACjE,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAEjE,OAAO,CAAC,IAAI,GAAG,YAAY,CAAC;QAC5B,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;QAEhC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;QAElE,MAAM,IAAI,GAAG,IAAI,8BAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;YAC/D,IAAI,EAAE,kBAAkB;SACzB,CAAC,CAAC;QAEH,MAAM,KAAK,GAAG,IAAI,4BAAY,EAAE;aAC7B,QAAQ,CAAC,+BAA+B,CAAC;aACzC,QAAQ,CAAC,QAAQ,CAAC;aAClB,QAAQ,CAAC,oBAAoB,CAAC;aAC9B,YAAY,EAAE,CAAC;QAElB,MAAM,OAAO,CAAC,MAAM,EAAE,CAAC;QACvB,OAAO,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACxE,CAAC;CACF,CAAC;AACF,iBAAS,UAAU,CAAC","debug_id":"2d830c3b-e211-5c74-a5aa-9be4496550c7"}