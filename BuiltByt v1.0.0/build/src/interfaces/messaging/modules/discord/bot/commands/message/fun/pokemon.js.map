{"version":3,"file":"pokemon.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/fun/pokemon.ts"],"sourceRoot":"/","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n\tActionRowBuilder, ButtonBuilder, ButtonStyle, ChannelType, EmbedBuilder\r\n} from \"discord.js\";\r\n\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { Precommand } from \"@typings/modules/discord\";\r\nimport { logWithLabel } from \"@utils/functions/console\";\r\n\r\nconst pokedexCommand: Precommand = {\r\n  name: \"pokedex\",\r\n  description: \"Pokedex command can show you information about pokemon\",\r\n  examples: [\"pokedex <pokemon>\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  cooldown: 15,\r\n  aliases: [\"pokedex-search\", \"pokedex-pokemon\", \"pokedex-info\", \"pokemon\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  permissions: [\"SendMessages\"],\r\n  subcommands: [\"pokedex info <name>\"],\r\n  async execute(client, message, args, prefix) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n    const subcommand = args[0];\r\n    switch (subcommand) {\r\n      case \"info\":\r\n        {\r\n          try {\r\n            const pokemon = args.slice(1).join(\" \");\r\n            if (!message.guild) return;\r\n            if (!pokemon)\r\n              return message.reply({\r\n                content: [\r\n                  `${client.getEmoji(message.guild.id, \"error\")} Please provide a pokemon name!`,\r\n                  `Correct usage: \\`${prefix}pokedex <pokemon>\\``,\r\n                ].join(\"\\n\"),\r\n              });\r\n\r\n            const response = await getResponse(`https://pokeapi.glitch.me/v1/pokemon/${pokemon}`);\r\n            if (response.status === 404) {\r\n              message.channel.send({\r\n                content: [\r\n                  `${client.getEmoji(message.guild.id, \"error\")} The pokemon \\`${pokemon}\\` was not found in the PokéDex!`,\r\n                  `Please make sure you spelled the name correctly and try again!`,\r\n                ].join(\"\\n\"),\r\n              });\r\n            } else {\r\n              if (!response.success) return;\r\n              const json = response.data[0];\r\n              if (!json) return;\r\n              const name = json.name.toLowerCase();\r\n              let hiddenAbilities = ` and ${json.abilities.hidden}.`;\r\n              if (!json.abilities.hidden.length) {\r\n                hiddenAbilities = \".\";\r\n              }\r\n              let gender = json.gender;\r\n              if (!json.gender.length) {\r\n                gender = \"Genderless\";\r\n              }\r\n\r\n              const button = new ActionRowBuilder<ButtonBuilder>().addComponents(\r\n                new ButtonBuilder()\r\n                  .setLabel(\"Bulbapedia\")\r\n                  .setURL(`https://bulbapedia.bulbagarden.net/wiki/${json.name}`)\r\n                  .setStyle(ButtonStyle.Link),\r\n                new ButtonBuilder()\r\n                  .setLabel(\"Serebii\")\r\n                  .setURL(`https://www.serebii.net/pokedex-swsh/${json.name.toLowerCase()}`)\r\n                  .setStyle(ButtonStyle.Link),\r\n                new ButtonBuilder()\r\n                  .setLabel(\"Smogon\")\r\n                  .setURL(`https://www.smogon.com/dex/ss/pokemon/${json.name.toLowerCase()}`)\r\n                  .setStyle(ButtonStyle.Link),\r\n              );\r\n\r\n              await message.channel.send({\r\n                embeds: [\r\n                  new EmbedBuilder()\r\n                    .setAuthor({\r\n                      name: `PokéDex: ${json.name}`,\r\n                      iconURL: `https://play.pokemonshowdown.com/sprites/ani/${name}.gif`,\r\n                    })\r\n                    .setColor(\"Random\")\r\n                    .setThumbnail(`https://play.pokemonshowdown.com/sprites/ani/${name}.gif`)\r\n                    .addFields(\r\n                      {\r\n                        name: \"National Dex Number\",\r\n                        value: `${json.nationalNumber}`,\r\n                        inline: true,\r\n                      },\r\n                      {\r\n                        name: \"Type(s)\",\r\n                        value: `${json.types.join(\", \")}`,\r\n                        inline: true,\r\n                      },\r\n                      {\r\n                        name: \"Abilities\",\r\n                        value: `${json.abilities.normal}${hiddenAbilities}`,\r\n                        inline: false,\r\n                      },\r\n                      { name: \"Gender Ratio\", value: `${gender}`, inline: false },\r\n                      {\r\n                        name: \"Height and Weight\",\r\n                        value: `${json.height} foot tall\\n${json.weight}`,\r\n                        inline: true,\r\n                      },\r\n                      {\r\n                        name: \"Evolutionary line\",\r\n                        value: `${json.family.evolutionLine.join(\", \")}\\nCurrent Evolution Stage: ${\r\n                          json.family.evolutionStage\r\n                        }`,\r\n                        inline: true,\r\n                      },\r\n                      { name: \"Generation\", value: `${json.gen}`, inline: false },\r\n                      {\r\n                        name: \"Egg Groups\",\r\n                        value: `${json.eggGroups.join(\", \")}`,\r\n                        inline: false,\r\n                      },\r\n                      {\r\n                        name: \"Catch Rate\",\r\n                        value: `${json.captureRate}`,\r\n                        inline: false,\r\n                      },\r\n                    )\r\n                    .setFooter({ text: json.description }),\r\n                ],\r\n                components: [button],\r\n              });\r\n            }\r\n          } catch (err) {\r\n            logWithLabel(\"error\", `The following error occured: ${err}`);\r\n            if (!message.guild) return;\r\n            message.channel.send({\r\n              embeds: [\r\n                new ErrorEmbed()\r\n                  .setTitle(\"An error occurred\")\r\n                  .setDescription(\r\n                    [\r\n                      `${client.getEmoji(message.guild.id, \"error\")} The following error occured: \\`${err}\\``,\r\n                      `**Example:** \\`${prefix}pokedex pikachu\\``,\r\n                    ].join(\"\\n\"),\r\n                  ),\r\n              ],\r\n            });\r\n          }\r\n        }\r\n        break;\r\n    }\r\n\r\n    async function getResponse(url: string) {\r\n      try {\r\n        const res = await axios.get(url);\r\n        return {\r\n          success: true,\r\n          status: res.status,\r\n          data: res.data,\r\n        };\r\n      } catch (error: any) {\r\n        return {\r\n          success: false,\r\n          status: error.response?.status,\r\n          data: error.response?.data,\r\n        };\r\n      }\r\n    }\r\n\r\n    return;\r\n  },\r\n};\r\n\r\nexport = pokedexCommand;\r\n"],"names":[],"mappings":"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","debug_id":"c97affb2-b99d-58ec-9d6c-dceff60697b4"}