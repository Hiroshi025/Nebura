{"version":3,"file":"suggest.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/slash/admin/suggest.ts"],"sourceRoot":"/","sourcesContent":["import {\r\n\tActionRowBuilder, ButtonBuilder, ButtonStyle, ChannelSelectMenuBuilder, ChannelType,\r\n\tEmbedBuilder, PermissionFlagsBits, SlashCommandBuilder\r\n} from \"discord.js\";\r\n\r\nimport { Command } from \"@/interfaces/messaging/modules/discord/structure/utils/builders\";\r\nimport { main } from \"@/main\";\r\n\r\nexport default new Command(\r\n  new SlashCommandBuilder()\r\n    .setName(\"suggest-config\")\r\n    .setNameLocalizations({\r\n      \"es-ES\": \"config-sugerencias\",\r\n    })\r\n    .setDescription(\"Configure the suggestion channel.\")\r\n    .setDescriptionLocalizations({\r\n      \"es-ES\": \"Configura el canal de sugerencias.\",\r\n    })\r\n    .setDefaultMemberPermissions(PermissionFlagsBits.Administrator),\r\n  async (_client, interaction) => {\r\n    if (!interaction.guild) return;\r\n\r\n    const guildId = interaction.guild.id;\r\n\r\n    // Embed inicial para configurar el canal de sugerencias\r\n    const embed = new EmbedBuilder()\r\n      .setTitle(\"ðŸ’¡ Suggestion Channel Configuration\")\r\n      .setDescription(\"Select a channel to use for suggestions or disable the suggestion feature.\")\r\n      .setColor(\"Blue\");\r\n\r\n    const channelMenu = new ChannelSelectMenuBuilder()\r\n      .setCustomId(\"select-suggestion-channel\")\r\n      .setPlaceholder(\"Select a channel\")\r\n      .setChannelTypes(ChannelType.GuildText);\r\n\r\n    const disableButton = new ButtonBuilder()\r\n      .setCustomId(\"disable-suggestions\")\r\n      .setLabel(\"Disable Suggestions\")\r\n      .setStyle(ButtonStyle.Danger);\r\n\r\n    const row1 = new ActionRowBuilder<ChannelSelectMenuBuilder>().addComponents(channelMenu);\r\n\r\n    const row2 = new ActionRowBuilder<ButtonBuilder>().addComponents(disableButton);\r\n\r\n    await interaction.reply({\r\n      embeds: [embed],\r\n      components: [row1, row2],\r\n      flags: \"Ephemeral\",\r\n    });\r\n\r\n    const collector = interaction.channel?.createMessageComponentCollector({\r\n      time: 60000,\r\n    });\r\n\r\n    collector?.on(\"collect\", async (componentInteraction) => {\r\n      if (componentInteraction.user.id !== interaction.user.id) {\r\n        return componentInteraction.reply({\r\n          content: \"You cannot interact with this configuration.\",\r\n          flags: \"Ephemeral\",\r\n        });\r\n      }\r\n\r\n      if (\r\n        componentInteraction.isChannelSelectMenu() &&\r\n        componentInteraction.customId === \"select-suggestion-channel\"\r\n      ) {\r\n        const selectedChannelId = componentInteraction.values[0];\r\n\r\n        await main.prisma.myGuild.upsert({\r\n          where: { guildId },\r\n          update: { suggestChannel: selectedChannelId },\r\n          create: {\r\n            guildId,\r\n            discordId: _client.user?.id || \"\",\r\n            suggestChannel: selectedChannelId,\r\n          },\r\n        });\r\n\r\n        await componentInteraction.update({\r\n          content: `âœ… Suggestion channel has been set to <#${selectedChannelId}>.`,\r\n          embeds: [],\r\n          components: [],\r\n        });\r\n      }\r\n\r\n      if (\r\n        componentInteraction.isButton() &&\r\n        componentInteraction.customId === \"disable-suggestions\"\r\n      ) {\r\n        await main.prisma.myGuild.update({\r\n          where: { guildId },\r\n          data: { suggestChannel: null },\r\n        });\r\n\r\n        await componentInteraction.update({\r\n          content: \"âŒ Suggestion feature has been disabled.\",\r\n          embeds: [],\r\n          components: [],\r\n        });\r\n      }\r\n\r\n      return;\r\n    });\r\n\r\n    collector?.on(\"end\", async () => {\r\n      await interaction.editReply({\r\n        components: [],\r\n      });\r\n    });\r\n  },\r\n);\r\n"],"names":[],"mappings":"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","debug_id":"3eabea1e-6131-5d63-a3f2-2147c9c294e5"}