{"version":3,"file":"yt.js","sources":["src/interfaces/messaging/modules/discord/bot/commands/message/images/yt.ts"],"sourceRoot":"/","sourcesContent":["import { AttachmentBuilder, ChannelType } from \"discord.js\";\r\n\r\nimport { EmbedCorrect, ErrorEmbed } from \"@/shared/adapters/extends/embeds.extend\";\r\nimport { createCanvas, loadImage } from \"@napi-rs/canvas\";\r\nimport { Precommand } from \"@typings/modules/discord\";\r\n\r\nconst ytCommand: Precommand = {\r\n  name: \"yt-comment\",\r\n  description: \"Create a YouTube comment image with a custom comment.\",\r\n  examples: [\"yt-comment @User I love this image!\", \"yt-comment @User I hate this image!\"],\r\n  nsfw: false,\r\n  owner: false,\r\n  cooldown: 5,\r\n  aliases: [\"yt-comment\", \"youtube-comment\", \"ytcomment\", \"yt\"],\r\n  botpermissions: [\"SendMessages\"],\r\n  permissions: [\"SendMessages\"],\r\n  async execute(client, message, args, prefix) {\r\n    if (!message.guild || !message.channel || message.channel.type !== ChannelType.GuildText) return;\r\n    const user = message.mentions.users.first() || message.author;\r\n    const comment = args.slice(1).join(\" \");\r\n    if (!comment)\r\n      return message.channel.send({\r\n        embeds: [\r\n          new ErrorEmbed().setDescription(\r\n            [\r\n              `${client.getEmoji(message.guild.id, \"error\")} You need to provide a comment to be displayed on the image!`,\r\n              `**Usage:** \\`${prefix}yt-comment <user> <comment>\\``,\r\n            ].join(\"\\n\"),\r\n          ),\r\n        ],\r\n      });\r\n\r\n    const image = user.displayAvatarURL({\r\n      size: 128,\r\n      extension: \"png\",\r\n      forceStatic: true,\r\n    });\r\n\r\n    const targetImage = await loadImage(image.split(\"?\")[0]);\r\n    const background = await loadImage(\"./assets/images/yt-comment.png\");\r\n\r\n    const canvas = createCanvas(background.width, background.height);\r\n    const context = canvas.getContext(\"2d\");\r\n\r\n    context.drawImage(background, 0, 0, canvas.width, canvas.height);\r\n\r\n    context.imageSmoothingEnabled = true;\r\n\r\n    context.translate(0, 10);\r\n    context.save();\r\n    context.beginPath();\r\n    context.arc(61, 35, 25, 0, Math.PI * 2, true);\r\n    context.closePath();\r\n    context.clip();\r\n\r\n    context.drawImage(targetImage, 36, 35 - 25, 50, 50);\r\n\r\n    context.restore();\r\n\r\n    context.translate(105, 10);\r\n\r\n    context.font = \"semibold 19px Arial\";\r\n    context.fillStyle = \"#f1f1f1\";\r\n\r\n    const usernameWidth = context.measureText(`@${user.username}`).width;\r\n\r\n    context.fillText(`@${user.username}`, 0, 15);\r\n\r\n    context.font = \"18px Arial\";\r\n    context.fillStyle = \"#aaaaaa\";\r\n    context.fillText(\"26 minutes ago\", usernameWidth + 10, 15);\r\n\r\n    context.font = \"20px Arial\";\r\n    context.fillStyle = \"#f1f1f1\";\r\n    context.fillText(comment, 0, 50);\r\n\r\n    const file = new AttachmentBuilder(canvas.toBuffer(\"image/png\"), {\r\n      name: \"yt-comment.png\",\r\n    });\r\n\r\n    const embed = new EmbedCorrect()\r\n      .setImage(\"attachment://yt-comment.png\")\r\n      .setColor(\"Random\")\r\n      .setTitle(\"PH Comment - Image\")\r\n      .setTimestamp();\r\n\r\n    await message.delete();\r\n    return await message.channel.send({ embeds: [embed], files: [file] });\r\n  },\r\n};\r\nexport = ytCommand;\r\n"],"names":[],"mappings":"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","debug_id":"1f685888-f1e5-5d76-ab98-b27559009780"}