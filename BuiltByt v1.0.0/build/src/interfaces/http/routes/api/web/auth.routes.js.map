{"version":3,"file":"auth.routes.js","sources":["src/interfaces/http/routes/api/web/auth.routes.ts"],"sourceRoot":"/","sourcesContent":["// Importa los tipos necesarios de Express\r\n// import { Request, Response } from 'express';\r\n\r\nimport { Request, Response } from \"express\";\r\n\r\nimport { passport } from \"@/adapters/external/passport\";\r\nimport { TRoutesInput } from \"@/typings/utils\";\r\nimport { config } from \"@utils/config\";\r\n\r\n/**\r\n * Formatea las rutas de autenticación con el prefijo correcto\r\n * @param path Ruta específica del endpoint\r\n * @returns Ruta completa formateada\r\n */\r\nconst formatRoute = (path: string): string => `/dashboard/auth/${path}`;\r\nexport default ({ app }: TRoutesInput) => {\r\n  app.get(\r\n    formatRoute(\"discord\"),\r\n    passport.authenticate(\"discord\", {\r\n      failureRedirect: \"/dashboard/logout\",\r\n    }),\r\n    (_req: Request, res: Response) => {\r\n      res.redirect(\"/dashboard\");\r\n    },\r\n  );\r\n\r\n  app.get(formatRoute(\"\"), (req: Request, res: Response) => {\r\n    return res.render(\"authme.ejs\", {\r\n      title: config.project.name + \" - Nebura\",\r\n      user: req.user,\r\n    });\r\n  });\r\n\r\n    app.get(formatRoute(\"administrator\"), async (req: Request, res: Response) => {\r\n      return res.render(\"authme-admin.ejs\", {\r\n        title: config.project.name + \" - Nebura\",\r\n        user: req.user,\r\n      });\r\n    });\r\n};\r\n"],"names":[],"mappings":";;;AAAA,0CAA0C;AAC1C,+CAA+C;;AAI/C,2DAAwD;AAExD,0CAAuC;AAEvC;;;;GAIG;AACH,MAAM,WAAW,GAAG,CAAC,IAAY,EAAU,EAAE,CAAC,mBAAmB,IAAI,EAAE,CAAC;AACxE,kBAAe,CAAC,EAAE,GAAG,EAAgB,EAAE,EAAE;IACvC,GAAG,CAAC,GAAG,CACL,WAAW,CAAC,SAAS,CAAC,EACtB,mBAAQ,CAAC,YAAY,CAAC,SAAS,EAAE;QAC/B,eAAe,EAAE,mBAAmB;KACrC,CAAC,EACF,CAAC,IAAa,EAAE,GAAa,EAAE,EAAE;QAC/B,GAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;IAC7B,CAAC,CACF,CAAC;IAEF,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,GAAY,EAAE,GAAa,EAAE,EAAE;QACvD,OAAO,GAAG,CAAC,MAAM,CAAC,YAAY,EAAE;YAC9B,KAAK,EAAE,eAAM,CAAC,OAAO,CAAC,IAAI,GAAG,WAAW;YACxC,IAAI,EAAE,GAAG,CAAC,IAAI;SACf,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;IAED,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,EAAE,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,EAAE;QAC1E,OAAO,GAAG,CAAC,MAAM,CAAC,kBAAkB,EAAE;YACpC,KAAK,EAAE,eAAM,CAAC,OAAO,CAAC,IAAI,GAAG,WAAW;YACxC,IAAI,EAAE,GAAG,CAAC,IAAI;SACf,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAC","debug_id":"e206b94b-3d44-5990-be9c-41ed33e92486"}