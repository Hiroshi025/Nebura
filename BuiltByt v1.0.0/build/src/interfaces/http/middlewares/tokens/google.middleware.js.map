{"version":3,"file":"google.middleware.js","sources":["src/interfaces/http/middlewares/tokens/google.middleware.ts"],"sourceRoot":"/","sourcesContent":["import * as crypto from \"crypto\";\r\nimport { NextFunction, Response } from \"express\";\r\n\r\nimport { AuthenticatedRequest } from \"@typings/modules/api\";\r\n\r\nexport const validateTokenAI = (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\r\n  const apiKey = req.headers[\"x-gemini-api-key\"] as string;\r\n  const model = req.headers[\"x-gemini-model\"] as string;\r\n\r\n  if (!apiKey || !model) {\r\n    return res.status(400).json({\r\n      data: null,\r\n      error: \"Missing required headers: x-gemini-api-key and x-gemini-model\",\r\n    });\r\n  }\r\n\r\n  const apiKeyHash = crypto.createHash(\"sha256\").update(apiKey).digest(\"hex\");\r\n\r\n  req.geminiConfig = {\r\n    apiKey,\r\n    model,\r\n    apiKeyHash,\r\n  };\r\n\r\n  next();\r\n  return;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAAiC;AAK1B,MAAM,eAAe,GAAG,CAAC,GAAyB,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IAC9F,MAAM,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,kBAAkB,CAAW,CAAC;IACzD,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,gBAAgB,CAAW,CAAC;IAEtD,IAAI,CAAC,MAAM,IAAI,CAAC,KAAK,EAAE,CAAC;QACtB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,IAAI,EAAE,IAAI;YACV,KAAK,EAAE,+DAA+D;SACvE,CAAC,CAAC;IACL,CAAC;IAED,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAE5E,GAAG,CAAC,YAAY,GAAG;QACjB,MAAM;QACN,KAAK;QACL,UAAU;KACX,CAAC;IAEF,IAAI,EAAE,CAAC;IACP,OAAO;AACT,CAAC,CAAC;AArBW,QAAA,eAAe,mBAqB1B","debug_id":"3ffaa37b-4352-5f9d-9327-552311228ba5"}